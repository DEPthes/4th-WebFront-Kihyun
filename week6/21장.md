# 21장 빌트인 객체

자바스크립트에는 미리 만들어져 있어 바로 사용할 수 있는 특별한 객체들이 있다. 이것들은 코딩을 더 편하고 강력하게 할 수 있도록 돕는다.

## 21.1 자바스크립트 객체의 종류

- **표준 빌트인 객체**: `Object`, `String`, `Array`처럼 자바스크립트 언어 자체에 내장된 기본 객체이다. 어디서든 쓸 수 있다.
- **호스트 객체**: 자바스크립트 실행 환경(브라우저, Node.js 등)이 특별히 제공하는 객체이다. 브라우저의 `window`나 `document` 객체가 대표적이다.
- **사용자 정의 객체**: 개발자가 필요에 따라 직접 만든 객체이다.

## 21.2 표준 빌트인 객체

자바스크립트에는 약 40여 개의 표준 빌트인 객체가 있다. 대부분은 `new` 키워드로 새 객체를 만드는 생성자 함수로 동작한다. (`Math`, `Reflect`, `JSON` 등 일부는 제외)

- **새 객체 만들기(인스턴스 생성)**: `new String("Lee")`처럼 사용하면 해당 타입의 새 객체를 만든다.
- **메서드 종류**:
  - **프로토타입 메서드**: 만들어진 객체(인스턴스)가 사용하는 메서드이다. (예: `myString.toUpperCase()`)
  - **정적 메서드**: 객체를 만들지 않고 생성자 함수 자체가 직접 사용하는 메서드이다. (예: `Array.isArray(myArray)`)
- `Math`, `Reflect`, `JSON` 등은 `new`로 객체를 만들 수 없고, 정적 메서드만 제공한다.

표준 빌트인 객체로부터 만들어진 인스턴스는 그 객체의 `prototype`이라는 특별한 공간에 정의된 공통 기능(메서드 등)을 물려받아 사용할 수 있다.

## 21.3 원시값과 래퍼 객체

문자열, 숫자, 불리언 같은 원시값은 원래 객체가 아니지만, 마치 객체처럼 `.length` 프로퍼티를 읽거나 `.toUpperCase()` 같은 메서드를 호출할 수 있다.

```javascript
const str = "hello";
console.log(str.length); // 5
console.log(str.toUpperCase()); // HELLO
```

이것이 가능한 이유는, 원시값에 점(`.`)을 찍어 무언가를 하려고 할 때 자바스크립트 엔진이 그 순간 해당 원시값을 임시로 객체로 한번 감싸주기 때문이다. 이 임시 객체를 **래퍼 객체(Wrapper Object)**라고 부른다.

- **동작 간단 설명**:
  1.  원시값의 프로퍼티나 메서드에 접근 시도.
  2.  임시 래퍼 객체 생성 (예: 문자열이면 `String` 객체).
  3.  래퍼 객체를 통해 요청된 작업 수행.
  4.  작업 후 임시 래퍼 객체는 사라짐.
- 숫자(`Number`), 불리언(`Boolean`), 심볼(`Symbol`)도 필요할 때 각자의 래퍼 객체를 만든다.
- 단, `null`과 `undefined`는 래퍼 객체를 만들지 않아 이런 식의 접근이 불가능하다.

## 21.4 전역 객체

전역 객체는 자바스크립트 코드가 실행되기 전에 가장 먼저 만들어지는 특별한 최상위 객체이다.

- **이름**: 브라우저에서는 `window`, Node.js에서는 `global`이다.
- **특징**:
  - 개발자가 직접 만들 수 없다.
  - `window.setTimeout()`을 그냥 `setTimeout()`처럼, 전역 객체 이름을 생략하고 프로퍼티를 쓸 수 있다.
  - 모든 표준 빌트인 객체(`Object`, `String` 등)를 프로퍼티로 가진다.
  - 실행 환경이 제공하는 호스트 객체들도 프로퍼티로 가진다.
  - `var`로 선언한 전역 변수나 전역 함수, 선언 없이 사용된 변수(암묵적 전역)는 전역 객체의 프로퍼티가 된다.
  - `let`이나 `const`로 선언한 전역 변수는 전역 객체의 프로퍼티가 **아니다**.

### 21.4.1 빌트인 전역 프로퍼티

전역 객체가 기본으로 가지고 있는 값들이다.

- **`Infinity`**: 무한대를 나타내는 숫자이다.
- **`NaN`**: "숫자가 아님(Not-a-Number)"을 나타내는 숫자이다.
- **`undefined`**: '값이 정의되지 않음'을 나타내는 원시값이다.

### 21.4.2 빌트인 전역 함수

어디서든 바로 호출할 수 있는, 전역 객체의 기본 함수들이다.

- **`eval(codeString)`**: 문자열로 된 자바스크립트 코드를 받아 실행한다. **하지만 보안 문제와 성능 저하 때문에 사용을 절대 권장하지 않는다.**
- **`isFinite(value)`**: 값이 유한한 숫자인지 검사한다. 숫자가 아니면 숫자로 바꿔서 검사한다.
- **`isNaN(value)`**: 값이 `NaN`인지 검사한다. 숫자가 아니면 숫자로 바꿔서 검사한다.
- **`parseFloat(string)`**: 문자열을 받아 실수(부동 소수점 숫자)로 바꾼다. 문자열 앞부분부터 숫자 부분까지만 처리한다.
- **`parseInt(string, radix?)`**: 문자열을 받아 정수로 바꾼다. 두 번째 인자로 진법을 지정할 수 있다. 소수점 이하는 버린다.
- **`encodeURI(uriString)` / `decodeURI(encodedUriString)`**:
  - `encodeURI`: URI(웹 주소 등) 문자열을 받아 웹에서 안전하게 전송되도록 인코딩한다. 한글 등을 `%XX` 형태로 바꾼다. (URI 구조를 해치는 일부 문자들은 인코딩 안 함)
  - `decodeURI`: `encodeURI`로 인코딩된 문자열을 원래대로 되돌린다.
- **`encodeURIComponent(uriComponentString)` / `decodeURIComponent(encodedUriComponentString)`**:
  - `encodeURIComponent`: URI의 구성 요소(예: 쿼리 스트링의 값)를 인코딩한다. `encodeURI`보다 더 많은 문자를 인코딩한다 (`=`, `?`, `&` 등도 포함).
  - `decodeURIComponent`: `encodeURIComponent`로 인코딩된 문자열을 원래대로 되돌린다.

### 21.4.3 암묵적 전역 (Implicit Global)

`var`, `let`, `const` 없이 어떤 이름에 값을 할당하면, 자바스크립트 엔진은 그 이름을 전역 객체의 프로퍼티로 만들어 버린다. 이를 **암묵적 전역**이라고 한다.

```javascript
function foo() {
  x = 10; // 선언 없이 사용! window.x = 10; 처럼 동작
  console.log(x);
}
foo(); // 10
console.log(window.x); // 10
```

- **문제점**: 의도치 않은 전역 변수 생성, 코드 추적 어려움, `delete`로 삭제 가능함(일반 전역 변수와 다름).
- **예방**: 코드 상단에 `'use strict';` (엄격 모드)를 사용하면, 선언되지 않은 식별자에 값 할당 시 에러가 발생하여 실수를 막을 수 있다.
